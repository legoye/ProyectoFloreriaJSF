<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <h:body>
        <ui:composition template="/WEB-INF/facelets/templates/layout.xhtml">

            <ui:define name="contentSide">

            </ui:define>

            <ui:define name="content">
                <div class="container">
                    <div class="row">
                        <div class=" col-md-2">

                        </div>

                        <div class=" col-md-8">
                            
                            <div class="row" style="margin-top: 20px" >
                             <p:messages id="messages" showDetail="true" closable="true">
                                    <p:autoUpdate />
                                </p:messages>
                            </div>
                            
                            <div class="row" style="margin-top: 20px" >
                                <p:outputLabel value="Mi Carrito:"></p:outputLabel> 
                                
 

                            </div>

                            <div class="row" style="margin-top: 10px">
                                <h:form>
                                    <p:wizard  showNavBar="false" widgetVar="wiz">>
                                        <p:tab id="personal" title="Carrito" >
                                            <p:panel header="Mis Productos Selecionados" style="width: 100%">
                                                <p:dataTable var="car" value="#{carritoBean.list}">
                                                    <f:facet name="header">
                                                        <h:outputText value="Mis carrito de Compras"/>
                                                    </f:facet>

                                                    <p:column>

                                                        <f:facet name="header">
                                                            <h:outputText value="Nombre" />
                                                        </f:facet>
                                                        <h:outputText value="#{car.name}" />
                                                    </p:column>
                                                    <p:column>

                                                        <f:facet name="header">
                                                            <h:outputText value="Descripcion del producto" />
                                                        </f:facet>
                                                        <h:outputText value="#{car.descripcion}" />
                                                    </p:column>

                                                    <p:column>

                                                        <f:facet name="header">
                                                            <h:outputText value="Precio" />
                                                        </f:facet>
                                                        <h:outputText value="#{car.precio}" />
                                                    </p:column>

                                                    <p:column>

                                                        <f:facet name="header">
                                                            <h:outputText value="Eliminar" />
                                                        </f:facet>
                                                        <h:form>
                                                            <h:commandButton value="Eliminar" action="#{carritoBean.borrarCarrito()}">
                                                                <f:param value="#{car.id}" name="id"/>
                                                            </h:commandButton>
                                                        </h:form>     
                                                    </p:column>

                                                </p:dataTable>
                                            </p:panel>
                                        </p:tab>
                                        <p:tab id="address" title="Direccion de Envio" >
                                            <p:panel header="Direccion de Envio" >
                                                <h:messages errorClass="error"/>
                                                <h:panelGrid columns="2" width="800px" columnClasses="label, value">
                                                    <h:outputText value="Calle: " />
                                                    <p:inputText value="#{carritoBean.calle}" required="true" label="call"/>
                                                    <h:outputText value="Numero: " />
                                                    <p:inputText value="#{carritoBean.numero}" required="true" label="numero"/>
                                                    <h:outputText value="Codigo Postal: " />
                                                    <p:inputText value="#{carritoBean.cp}" required="true" label="cp"/>


                                                </h:panelGrid>
                                            </p:panel>
                                        </p:tab>
                                        <p:tab id="contact" title="Pago">
                                            <p:panel header="Pago">
                                                <h:messages errorClass="error"/>
                                                <h:panelGrid columns="2" width="800px">
                                                    <h:outputText value="Nombre Titular *" />
                                                    <p:inputText value="#{carritoBean.nombreTitular}" required="true" label="cp"/>
                                                    <h:outputText value="Numero de Tarjeta *" />
                                                    <p:inputText value="#{carritoBean.numeroTarjeta}" required="true" label="call"/>
                                                    <h:outputText value="Vencimiento * " />
                                                    <p:calendar id="popup" value="#{carritoBean.fechaVencimiento}" />



                                                </h:panelGrid>
                                            </p:panel>
                                        </p:tab>
                                        <p:tab id="confirm" title="Confirmacion de Compra">
                                            <p:panel header="Confirmacion de Compra" >
                                                <h:panelGrid id="confirmation" columns="2" width="800px">
                                                    <h:outputText value="Calle " />
                                                    <h:outputText value="#{carritoBean.calle}" />
                                                    <h:outputText value="Codigo Postal " />
                                                    <h:outputText value="#{carritoBean.cp}" />
                                                    <h:outputText value="Numero de Tarjeta " />
                                                    <h:outputText value="#{carritoBean.numeroTarjeta}" />
                                                   


                                                </h:panelGrid>
                                                
                                               
                                                <p:commandButton value="Pagar" actionListener="#{carritoBean.pagar()}" />
                                            </p:panel>
                                        </p:tab>
                                    </p:wizard>



                                </h:form>









                            </div>

                            <div class="row" >

                                <div class="col-md-8">

                                </div>
                                <div class="col-md-2">
                                    <h:outputLink value="#" onclick="PF('wiz').back();">Regresar</h:outputLink>
                                </div>
                                <div class="col-md-2">
                                    <h:outputLink value="#" onclick="PF('wiz').next();">Siguiente</h:outputLink>

                                </div>


                            </div> 


                            <div class="row" >
                                <div class="col-lg-8 col-md-6 mb-4">
                                </div>
                                <div class="col-lg-2 col-md-6 mb-4">
                                    <p:outputLabel value="Total:"></p:outputLabel> 
                                </div>
                                <div class="col-lg-2 col-md-6 mb-4">             
                                    <p:outputLabel value="#{carritoBean.total}"></p:outputLabel> 
                                </div>

                            </div>

                            <div class=" col-md-2">

                            </div>




                        </div>


                    </div>
                </div>



            </ui:define>

        </ui:composition>
    </h:body>
</html>

